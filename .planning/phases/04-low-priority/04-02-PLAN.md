# Phase 4, Plan 2: Performance & Testing

## Objective

Add performance optimizations (React.memo, useMemo, useCallback) and establish testing infrastructure. Set up Vitest for unit tests, add E2E testing with Playwright, and implement basic test coverage.

## Context

**Source**: analysis/remediation-plan.md (Fix 4.3, 4.4)
**Priority**: LOW - Optimization
**Effort**: Medium

Files: Multiple components, test files (NEW), vitest.config.ts (NEW), playwright.config.ts (NEW)

## Tasks

### Task 1: Add React performance optimizations
**Type**: modify
**Files**: src/components/CheckPreview.tsx, CheckForm.tsx
**Action**:
- Wrap expensive components in React.memo
- Use useMemo for calculations
- Use useCallback for handlers
**Done**: ☐

### Task 2: Set up Vitest configuration
**Type**: new-file
**Files**: vitest.config.ts
**Action**: Configure Vitest for React component testing
**Done**: ☐

### Task 3: Add unit tests for utilities
**Type**: new-file
**Files**: src/utils/*.test.ts
**Action**:
- Test validation.ts functions
- Test dateHelpers.ts functions
- Test checkFormatting.ts functions
- Achieve 80%+ coverage for utilities
**Done**: ☐

### Task 4: Set up Playwright for E2E
**Type**: new-file + dependency
**Files**: playwright.config.ts, tests/e2e/*.spec.ts
**Action**:
- Install Playwright
- Create E2E tests for check workflow
- Test: fill form → preview → print
**Done**: ☐

### Task 5: Add test scripts
**Type**: modify
**Files**: package.json
**Action**:
- Add test:unit, test:e2e, test:coverage scripts
- Configure CI-friendly test runs
**Done**: ☐

### Task 6: Run all tests
**Type**: testing
**Action**: Verify all tests pass, review coverage reports
**Done**: ☐

## Success Criteria
- [ ] Performance optimizations added
- [ ] Vitest configured
- [ ] Unit tests for all utilities
- [ ] E2E tests for main workflow
- [ ] 80%+ utility test coverage
- [ ] All tests passing
- [ ] CI-ready test infrastructure

## Output
Create `04-02-SUMMARY.md` with performance improvements, test infrastructure, coverage reports, commits.
